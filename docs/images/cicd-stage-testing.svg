<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" width="680" height="550" viewBox="0 0 680 550" font-family="'Segoe UI', Arial, Helvetica, sans-serif">
  <defs>
    <marker id="arrow" markerWidth="8" markerHeight="6" refX="8" refY="3" orient="auto">
      <path d="M0,0 L8,3 L0,6 Z" fill="#334155"/>
    </marker>
    <marker id="arrow-green" markerWidth="8" markerHeight="6" refX="8" refY="3" orient="auto">
      <path d="M0,0 L8,3 L0,6 Z" fill="#16a34a"/>
    </marker>
    <marker id="arrow-red" markerWidth="8" markerHeight="6" refX="8" refY="3" orient="auto">
      <path d="M0,0 L8,3 L0,6 Z" fill="#dc2626"/>
    </marker>
    <marker id="arrow-blue" markerWidth="8" markerHeight="6" refX="8" refY="3" orient="auto">
      <path d="M0,0 L8,3 L0,6 Z" fill="#1e40af"/>
    </marker>
    <marker id="arrow-amber" markerWidth="8" markerHeight="6" refX="8" refY="3" orient="auto">
      <path d="M0,0 L8,3 L0,6 Z" fill="#b45309"/>
    </marker>
  </defs>
  <rect width="680" height="550" fill="#ffffff"/>
  <text x="340" y="30" text-anchor="middle" font-size="20" font-weight="700" fill="#0f172a">Stage 2: Pre-Deployment Testing</text>
  <text x="340" y="48" text-anchor="middle" font-size="12" fill="#64748b">CI — required for High/Critical, optional for Low/Medium</text>
  <rect x="90" y="60" width="500" height="360" rx="8" fill="#ffffff" stroke="#1e40af" stroke-width="1.5"/>
  <path d="M98,60 L582,60 Q590,60 590,68 L590,88 L90,88 L90,68 Q90,60 98,60 Z" fill="#1e40af"/>
  <text x="340" y="79" text-anchor="middle" font-size="13" font-weight="700" fill="#ffffff">Pre-Deployment Testing</text>
  <text x="110" y="110" text-anchor="start" font-size="12" font-weight="700" fill="#0f172a">1. Guardrail tests</text>
  <text x="130" y="130" text-anchor="start" font-size="11" font-weight="400" fill="#64748b">Send known-bad inputs → verify block</text>
  <text x="130" y="146" text-anchor="start" font-size="11" font-weight="400" fill="#64748b">Send known-good inputs → verify pass</text>
  <text x="110" y="164" text-anchor="start" font-size="12" font-weight="700" fill="#0f172a">2. Scope tests</text>
  <text x="130" y="184" text-anchor="start" font-size="11" font-weight="400" fill="#64748b">Send out-of-scope queries</text>
  <text x="130" y="200" text-anchor="start" font-size="11" font-weight="400" fill="#64748b">Verify refusal or redirect</text>
  <text x="110" y="218" text-anchor="start" font-size="12" font-weight="700" fill="#0f172a">3. Output schema tests</text>
  <text x="130" y="238" text-anchor="start" font-size="11" font-weight="400" fill="#64748b">Send valid queries</text>
  <text x="130" y="254" text-anchor="start" font-size="11" font-weight="400" fill="#64748b">Verify output matches declared format</text>
  <text x="110" y="272" text-anchor="start" font-size="12" font-weight="700" fill="#0f172a">4. Regression tests</text>
  <text x="130" y="292" text-anchor="start" font-size="11" font-weight="400" fill="#64748b">Run known interactions with expected outcomes</text>
  <text x="130" y="308" text-anchor="start" font-size="11" font-weight="400" fill="#64748b">Catch regressions from model/prompt changes</text>
  <text x="110" y="326" text-anchor="start" font-size="12" font-weight="700" fill="#0f172a">5. Judge dry-run (Critical only)</text>
  <text x="130" y="346" text-anchor="start" font-size="11" font-weight="400" fill="#64748b">Run Judge against test interactions</text>
  <text x="130" y="362" text-anchor="start" font-size="11" font-weight="400" fill="#64748b">Verify Judge criteria alignment</text>
  <line x1="260" y1="420" x2="260" y2="445" stroke="#334155" stroke-width="1.5" marker-end="url(#arrow)"/>
  <rect x="180" y="445" width="160" height="48" rx="6" fill="#f0fdf4" stroke="#86efac" stroke-width="1"/>
  <text x="260" y="465" text-anchor="middle" font-size="12" font-weight="700" fill="#166534">PASS</text>
  <text x="260" y="480" text-anchor="middle" font-size="10" font-weight="400" fill="#4ade80">Continue pipeline</text>
  <line x1="420" y1="420" x2="420" y2="445" stroke="#334155" stroke-width="1.5" marker-end="url(#arrow)"/>
  <rect x="340" y="445" width="160" height="48" rx="6" fill="#fef2f2" stroke="#fca5a5" stroke-width="1"/>
  <text x="420" y="465" text-anchor="middle" font-size="12" font-weight="700" fill="#991b1b">FAIL</text>
  <text x="420" y="480" text-anchor="middle" font-size="10" font-weight="400" fill="#f87171">Block deploy + show failures</text>
</svg>