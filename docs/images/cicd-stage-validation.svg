<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" width="680" height="520" viewBox="0 0 680 520" font-family="'Segoe UI', Arial, Helvetica, sans-serif">
  <defs>
    <marker id="arrow" markerWidth="8" markerHeight="6" refX="8" refY="3" orient="auto">
      <path d="M0,0 L8,3 L0,6 Z" fill="#334155"/>
    </marker>
    <marker id="arrow-green" markerWidth="8" markerHeight="6" refX="8" refY="3" orient="auto">
      <path d="M0,0 L8,3 L0,6 Z" fill="#16a34a"/>
    </marker>
    <marker id="arrow-red" markerWidth="8" markerHeight="6" refX="8" refY="3" orient="auto">
      <path d="M0,0 L8,3 L0,6 Z" fill="#dc2626"/>
    </marker>
    <marker id="arrow-blue" markerWidth="8" markerHeight="6" refX="8" refY="3" orient="auto">
      <path d="M0,0 L8,3 L0,6 Z" fill="#1e40af"/>
    </marker>
    <marker id="arrow-amber" markerWidth="8" markerHeight="6" refX="8" refY="3" orient="auto">
      <path d="M0,0 L8,3 L0,6 Z" fill="#b45309"/>
    </marker>
  </defs>
  <rect width="680" height="520" fill="#ffffff"/>
  <text x="340" y="30" text-anchor="middle" font-size="20" font-weight="700" fill="#0f172a">Stage 1: Declaration Validation</text>
  <text x="340" y="48" text-anchor="middle" font-size="12" fill="#64748b">CI â€” runs on every PR that touches declaration or AI code</text>
  <rect x="90" y="60" width="500" height="340" rx="8" fill="#ffffff" stroke="#1e40af" stroke-width="1.5"/>
  <path d="M98,60 L582,60 Q590,60 590,68 L590,88 L90,88 L90,68 Q90,60 98,60 Z" fill="#1e40af"/>
  <text x="340" y="79" text-anchor="middle" font-size="13" font-weight="700" fill="#ffffff">Declaration Validation</text>
  <text x="110" y="110" text-anchor="start" font-size="12" font-weight="700" fill="#0f172a">1. Schema validation</text>
  <text x="130" y="130" text-anchor="start" font-size="11" font-weight="400" fill="#64748b">All required fields present</text>
  <text x="130" y="146" text-anchor="start" font-size="11" font-weight="400" fill="#64748b">Field values are valid types</text>
  <text x="130" y="162" text-anchor="start" font-size="11" font-weight="400" fill="#64748b">Enums are valid</text>
  <text x="110" y="184" text-anchor="start" font-size="12" font-weight="700" fill="#0f172a">2. Completeness check</text>
  <text x="130" y="204" text-anchor="start" font-size="11" font-weight="400" fill="#64748b">Purpose is specific (&gt;20 words)</text>
  <text x="130" y="220" text-anchor="start" font-size="11" font-weight="400" fill="#64748b">Out-of-scope is non-empty</text>
  <text x="130" y="236" text-anchor="start" font-size="11" font-weight="400" fill="#64748b">Impact assessment is non-empty</text>
  <text x="110" y="258" text-anchor="start" font-size="12" font-weight="700" fill="#0f172a">3. Tier calculation</text>
  <text x="130" y="278" text-anchor="start" font-size="11" font-weight="400" fill="#64748b">Auto-calculated from fields</text>
  <text x="130" y="294" text-anchor="start" font-size="11" font-weight="400" fill="#64748b">Displayed in PR comment</text>
  <text x="110" y="316" text-anchor="start" font-size="12" font-weight="700" fill="#0f172a">4. Change detection</text>
  <text x="130" y="336" text-anchor="start" font-size="11" font-weight="400" fill="#64748b">Diff against previous version</text>
  <text x="130" y="352" text-anchor="start" font-size="11" font-weight="400" fill="#64748b">Flag material changes</text>
  <line x1="260" y1="400" x2="260" y2="425" stroke="#334155" stroke-width="1.5" marker-end="url(#arrow)"/>
  <rect x="180" y="425" width="160" height="48" rx="6" fill="#f0fdf4" stroke="#86efac" stroke-width="1"/>
  <text x="260" y="445" text-anchor="middle" font-size="12" font-weight="700" fill="#166534">PASS</text>
  <text x="260" y="460" text-anchor="middle" font-size="10" font-weight="400" fill="#4ade80">Continue pipeline</text>
  <line x1="420" y1="400" x2="420" y2="425" stroke="#334155" stroke-width="1.5" marker-end="url(#arrow)"/>
  <rect x="340" y="425" width="160" height="48" rx="6" fill="#fef2f2" stroke="#fca5a5" stroke-width="1"/>
  <text x="420" y="445" text-anchor="middle" font-size="12" font-weight="700" fill="#991b1b">FAIL</text>
  <text x="420" y="460" text-anchor="middle" font-size="10" font-weight="400" fill="#f87171">Block merge + show errors</text>
</svg>