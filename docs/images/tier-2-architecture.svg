<svg xmlns="http://www.w3.org/2000/svg" width="900" height="600" viewBox="0 0 900 600" font-family="'Segoe UI', 'Helvetica Neue', Arial, sans-serif">
  <defs>
    <linearGradient id="bg" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" stop-color="#0a0e1a"/>
      <stop offset="100%" stop-color="#1a1e3a"/>
    </linearGradient>
  </defs>

  <rect width="900" height="600" fill="url(#bg)"/>

  <!-- Title -->
  <text x="450" y="32" text-anchor="middle" fill="#fff" font-size="16" font-weight="700" letter-spacing="2">TIER 2 — MANAGED MULTI-AGENT ARCHITECTURE</text>
  <text x="450" y="50" text-anchor="middle" fill="#00c9ff" font-size="10" letter-spacing="1">MEDIUM AUTONOMY · SELECTIVE HUMAN OVERSIGHT · PRODUCTION</text>
  <line x1="150" y1="60" x2="750" y2="60" stroke="#00c9ff" stroke-width="0.6" opacity="0.4"/>

  <!-- Human Supervisor box -->
  <rect x="250" y="75" width="400" height="55" rx="8" fill="#0d1225" stroke="#92fe9d" stroke-width="1.5"/>
  <rect x="250" y="75" width="400" height="4" rx="2" fill="#92fe9d"/>
  <text x="450" y="100" text-anchor="middle" fill="#92fe9d" font-size="13" font-weight="700">HUMAN SUPERVISOR</text>
  <text x="450" y="117" text-anchor="middle" fill="#8899aa" font-size="9">Exception-based review · High-consequence actions only</text>

  <!-- Escalation arrow -->
  <line x1="450" y1="130" x2="450" y2="155" stroke="#92fe9d" stroke-width="1.5"/>
  <polygon points="443,150 450,160 457,150" fill="#92fe9d"/>
  <rect x="380" y="136" width="140" height="18" rx="9" fill="#0a0e1a" stroke="#92fe9d" stroke-width="0.8" opacity="0.7"/>
  <text x="450" y="149" text-anchor="middle" fill="#92fe9d" font-size="8" font-weight="600">ESCALATION ONLY</text>

  <!-- Main system boundary -->
  <rect x="50" y="165" width="800" height="395" rx="10" fill="none" stroke="#334" stroke-width="1" stroke-dasharray="6,3"/>
  <text x="70" y="183" fill="#556" font-size="9" letter-spacing="1">AGENT SYSTEM BOUNDARY</text>

  <!-- Agent A with NHI -->
  <rect x="80" y="200" width="210" height="110" rx="8" fill="#0d1225" stroke="#00c9ff" stroke-width="1.5"/>
  <rect x="80" y="200" width="210" height="4" rx="2" fill="#00c9ff"/>
  <text x="185" y="228" text-anchor="middle" fill="#00c9ff" font-size="13" font-weight="700">Agent A</text>
  <text x="185" y="246" text-anchor="middle" fill="#8899aa" font-size="10">(NHI-A)</text>
  <rect x="110" y="258" width="150" height="18" rx="4" fill="#0a1a2a" stroke="#00c9ff" stroke-width="0.5"/>
  <text x="185" y="271" text-anchor="middle" fill="#00c9ff" font-size="8">Certificate · Scoped · Rotated</text>
  <text x="185" y="298" text-anchor="middle" fill="#667" font-size="9">Short-lived credentials (1-24hr)</text>

  <!-- Agent B with NHI -->
  <rect x="610" y="200" width="210" height="110" rx="8" fill="#0d1225" stroke="#00c9ff" stroke-width="1.5"/>
  <rect x="610" y="200" width="210" height="4" rx="2" fill="#00c9ff"/>
  <text x="715" y="228" text-anchor="middle" fill="#00c9ff" font-size="13" font-weight="700">Agent B</text>
  <text x="715" y="246" text-anchor="middle" fill="#8899aa" font-size="10">(NHI-B)</text>
  <rect x="640" y="258" width="150" height="18" rx="4" fill="#0a1a2a" stroke="#00c9ff" stroke-width="0.5"/>
  <text x="715" y="271" text-anchor="middle" fill="#00c9ff" font-size="8">Certificate · Scoped · Rotated</text>
  <text x="715" y="298" text-anchor="middle" fill="#667" font-size="9">Short-lived credentials (1-24hr)</text>

  <!-- Signed Message Bus -->
  <rect x="330" y="210" width="240" height="70" rx="8" fill="#0d1225" stroke="#ffd700" stroke-width="2"/>
  <rect x="330" y="210" width="240" height="4" rx="2" fill="#ffd700"/>
  <text x="450" y="237" text-anchor="middle" fill="#ffd700" font-size="12" font-weight="700">Signed Message Bus</text>
  <text x="450" y="255" text-anchor="middle" fill="#ffd700" font-size="9">Mutual auth · Schema validation</text>
  <text x="450" y="270" text-anchor="middle" fill="#8899aa" font-size="9">Replay protection · DLP scanning</text>

  <!-- Connection lines -->
  <line x1="290" y1="250" x2="330" y2="250" stroke="#ffd700" stroke-width="1.2"/>
  <polygon points="325,246 333,250 325,254" fill="#ffd700"/>
  <polygon points="295,246 287,250 295,254" fill="#ffd700"/>
  <line x1="570" y1="250" x2="610" y2="250" stroke="#ffd700" stroke-width="1.2"/>
  <polygon points="605,246 613,250 605,254" fill="#ffd700"/>
  <polygon points="575,246 567,250 575,254" fill="#ffd700"/>

  <!-- Guardrails row -->
  <rect x="100" y="330" width="170" height="40" rx="6" fill="#0d1225" stroke="#f5576c" stroke-width="1.2"/>
  <text x="185" y="348" text-anchor="middle" fill="#f5576c" font-size="10" font-weight="600">Guardrails (L1)</text>
  <text x="185" y="362" text-anchor="middle" fill="#8899aa" font-size="8">MANDATORY</text>

  <rect x="630" y="330" width="170" height="40" rx="6" fill="#0d1225" stroke="#f5576c" stroke-width="1.2"/>
  <text x="715" y="348" text-anchor="middle" fill="#f5576c" font-size="10" font-weight="600">Guardrails (L1)</text>
  <text x="715" y="362" text-anchor="middle" fill="#8899aa" font-size="8">MANDATORY</text>

  <!-- LLM-as-Judge -->
  <rect x="330" y="325" width="240" height="50" rx="6" fill="#0d1225" stroke="#ff6b35" stroke-width="2"/>
  <rect x="330" y="325" width="240" height="4" rx="2" fill="#ff6b35"/>
  <text x="450" y="349" text-anchor="middle" fill="#ff6b35" font-size="11" font-weight="700">LLM-as-Judge (L2)</text>
  <text x="450" y="366" text-anchor="middle" fill="#ff6b35" font-size="9">MANDATORY · Distinct model from task agents</text>

  <!-- Judge connection to bus -->
  <line x1="450" y1="280" x2="450" y2="325" stroke="#ff6b35" stroke-width="1" stroke-dasharray="4,2"/>
  <polygon points="443,320 450,328 457,320" fill="#ff6b35"/>

  <!-- Action Classification -->
  <rect x="130" y="395" width="640" height="50" rx="6" fill="#0d1225" stroke="#00c9ff" stroke-width="1"/>
  <text x="450" y="415" text-anchor="middle" fill="#00c9ff" font-size="11" font-weight="600">Action Classification Engine</text>
  <text x="240" y="434" text-anchor="middle" fill="#92fe9d" font-size="9" font-weight="600">AUTO-APPROVE</text>
  <text x="240" y="443" text-anchor="middle" fill="#667" font-size="7">Reads · Low-risk writes</text>
  <text x="450" y="434" text-anchor="middle" fill="#ffd700" font-size="9" font-weight="600">ESCALATE</text>
  <text x="450" y="443" text-anchor="middle" fill="#667" font-size="7">High-consequence · External</text>
  <text x="660" y="434" text-anchor="middle" fill="#f5576c" font-size="9" font-weight="600">BLOCK</text>
  <text x="660" y="443" text-anchor="middle" fill="#667" font-size="7">Out-of-scope · Deny-list</text>

  <!-- Continuous Monitoring Layer -->
  <rect x="80" y="465" width="740" height="50" rx="6" fill="#0d1225" stroke="#c77dff" stroke-width="1.5"/>
  <rect x="80" y="465" width="740" height="4" rx="2" fill="#c77dff"/>
  <text x="450" y="490" text-anchor="middle" fill="#c77dff" font-size="11" font-weight="700">Continuous Monitoring Layer</text>
  <text x="450" y="506" text-anchor="middle" fill="#8899aa" font-size="9">Anomaly scoring · Behavioural drift detection · PACE triggers · SIEM/SOAR integration</text>

  <!-- Footer -->
  <rect x="50" y="570" width="800" height="22" rx="4" fill="#0a0e1a" stroke="#333" stroke-width="0.5"/>
  <text x="450" y="585" text-anchor="middle" fill="#556" font-size="9">PACE: All 4 phases operational · P→A automated · A→C security team · C→E CISO · No transitive permissions</text>
</svg>
